webpackJsonp([25],{"396o":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("IHPB"),i=a.n(n),r={data:function(){return{userInfo:"0.00",paymentList:[],recharge:""}},mounted:function(){this.getUserInfo(),this.getPayments()},methods:{getUserInfo:function(){var t=this;this.$api.userInfo({},function(e){e.status&&(t.userInfo=e.data)})},getPayments:function(){var t=this;this.$api.paymentList({},function(e){var a=e.data,n=a.filter(function(t){return"alipay"===t.code}),r=a.filter(function(t){return"wechatpay"===t.code});t.paymentList=[].concat(i()(n),i()(r))})},toRecharge:function(t){var e=this;if("wechatpay"===t)if(this.GLOBAL.isWeiXinBrowser()){var a={ids:this.userInfo.id,payment_code:t,payment_type:2,params:{trade_type:"JSAPI_OFFICIAL",money:this.recharge}};this.$api.pay(a,function(t){if(t.status){var a=t.data,n=e;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appid,timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign},function(t){"get_brand_wcpay_request:ok"===t.err_msg&&n.$dialog.toast({mes:"充值成功",callback:function(){n.$router.back(-1)}})})}})}else{var n={ids:this.userInfo.id,payment_code:t,payment_type:2,params:{money:this.recharge,trade_type:"MWEB",return_url:this.GLOBAL.locationHost()+"/#/balance"}};this.$api.pay(n,function(t){t.status&&(window.location.href=t.data.mweb_url)})}else if("alipay"===t){var i={ids:this.userInfo.id,payment_code:t,payment_type:2,params:{trade_type:"WAP",money:this.recharge,return_url:this.GLOBAL.locationHost()+"/#/balance"}};this.$api.pay(i,function(t){t.status&&e.StandardPost(t.data.url,t.data.data)})}},StandardPost:function(t,e){var a=document.createElement("form");a.id="aliPay",a.methods="post",a.action=t,a.target="_self";var n=[];for(var i in e)n[i]=document.createElement("input"),n[i].type="hidden",n[i].name=i,n[i].value=e[i],a.appendChild(n[i]);a.addEventListener("submit",function(){},!1),document.body.appendChild(a),a.dispatchEvent(new Event("submit")),a.submit(),document.body.removeChild(a)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recharge"},[a("yd-cell-group",[a("yd-cell-item",[a("span",{attrs:{slot:"left"},slot:"left"},[t._v("余额(元)：")]),t._v(" "),a("span",{attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.userInfo.balance))])]),t._v(" "),a("yd-cell-item",[a("span",{attrs:{slot:"left"},slot:"left"},[t._v("充值金额：")]),t._v(" "),a("yd-input",{attrs:{slot:"right",placeholder:"请输入要充值的金额"},slot:"right",model:{value:t.recharge,callback:function(e){t.recharge=e},expression:"recharge"}})],1)],1),t._v(" "),t.paymentList.length?a("div",{staticClass:"recharge-btn"},t._l(t.paymentList,function(e){return a("yd-button",{attrs:{size:"large",type:"primary"},nativeOn:{click:function(a){return t.toRecharge(e.code)}}},[t._v(t._s(e.name))])}),1):a("div",[a("yd-button",{attrs:{size:"large",type:"hollow"}},[t._v("暂无可充值方式")])],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(r,s,!1,function(t){a("VEUW")},"data-v-bd7b0e98",null);e.default=o.exports},VEUW:function(t,e){}});
//# sourceMappingURL=25.6ba2784203a8cce696da.js.map